<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>John Hamilton Bradford, Ph.D. on John Hamilton Bradford, Ph.D.</title>
    <link>/</link>
    <description>Recent content in John Hamilton Bradford, Ph.D. on John Hamilton Bradford, Ph.D.</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>&amp;copy; 2017 John Hamilton Bradford, Ph.D.</copyright>
    <lastBuildDate>Wed, 20 Apr 2016 00:00:00 +0000</lastBuildDate>
    <atom:link href="/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Police Shooting Heat Maps (County-Level)</title>
      <link>/post/police-shooting-heat-maps-county-level/</link>
      <pubDate>Fri, 12 May 2017 00:00:00 +0000</pubDate>
      
      <guid>/post/police-shooting-heat-maps-county-level/</guid>
      <description>&lt;p&gt;Below are some new county-level heat maps of police shooting data, compiled from the Lott &amp;amp; Moody (2016) data for years 2013-2015, and the Washington Post for 2016. Below the graphs, the R code is provided.&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/policeShoot/map_county_frequency_1366_768.png&#34; alt=&#34;Figure 1. Frequency of Civilians Killed by Police per County&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;Figure 1. Frequency of Civilians Killed by Police per County&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/policeShoot/map_county_rate_1366_768.png&#34; alt=&#34;Figure 2. Civilians Killed by Police per 100,000 Residents&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;Figure 2. Civilians Killed by Police per 100,000 Residents&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/policeShoot/map_county_rate_1366_768.png&#34; alt=&#34;Figure 3. Killed by Police Rates for Larger Counties&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;Figure 3. Killed by Police Rates for Larger Counties&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;r-code&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;R Code&lt;/h2&gt;
&lt;div id=&#34;load-the-data.&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;1. Load the Data.&lt;/h3&gt;
&lt;p&gt;(I plan to upload these data sets to figshare shortly.)&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(readr)
library(tidyr)
library(dplyr)


vars &amp;lt;- fst::read.fst(path = &amp;quot;countyVars.csv&amp;quot;)
df_wapoLott &amp;lt;- dplyr::left_join(vars, readr::read_csv(&amp;quot;killed_lott_wapo.csv&amp;quot;)) %&amp;gt;% 
    dplyr::mutate_at(vars(contains(&amp;quot;killed&amp;quot;)), funs(replace(., is.na(.), 0))) %&amp;gt;% 
    dplyr::mutate(killDummy = ifelse(killed == 0, &amp;quot;NO&amp;quot;, &amp;quot;YES&amp;quot;), killDummy = factor(killDummy), 
        killRate = killed/pop.c.total_5yr, policeRatio = policeFullTime/pop.c.total_5yr, 
        crowding_prcnt = log(crowding_prcnt + 1), bw_income_gap = medianIncome_black/medianIncome_white_nh, 
        black_sq = (pop.c.black_5yr/pop.c.total_5yr)^2, pop = log(pop.c.total_5yr), 
        pop.blackPrcnt_log = log(pop.c.black_5yr/pop.c.total_5yr), pop.c.hispanic_5yr = log(pop.c.hispanic_5yr/pop.c.total_5yr), 
        pop.male.15_29_5yr = log(pop.male.15_29_5yr/pop.c.total_5yr))

crimeRateVars &amp;lt;- c(&amp;quot;pc1Crime&amp;quot;, &amp;quot;pc2Crime&amp;quot;, &amp;quot;pc1Crime_3&amp;quot;, &amp;quot;pc2Crime_3&amp;quot;, &amp;quot;murder_r_4yr&amp;quot;, 
    &amp;quot;dui_r_4yr&amp;quot;, &amp;quot;drug_poss_r_4yr&amp;quot;, &amp;quot;vc_r_4yr&amp;quot;, &amp;quot;theft_r_4yr&amp;quot;, &amp;quot;vandal_r_4yr&amp;quot;)

crimeCountVars &amp;lt;- c(&amp;quot;murder_4yr&amp;quot;, &amp;quot;dui_4yr&amp;quot;, &amp;quot;drug_poss_4yr&amp;quot;, &amp;quot;vc_4yr&amp;quot;, &amp;quot;theft_4yr&amp;quot;, 
    &amp;quot;vandal_4yr&amp;quot;)

sesVars &amp;lt;- c(&amp;quot;medianIncome&amp;quot;, &amp;quot;bw_income_gap&amp;quot;, &amp;quot;gini&amp;quot;, &amp;quot;unemploymentRate_5yr&amp;quot;, 
    &amp;quot;singleParent_prcnt&amp;quot;, &amp;quot;poverty&amp;quot;, &amp;quot;sesall&amp;quot;, &amp;quot;pc1SES&amp;quot;, &amp;quot;pc2SES&amp;quot;, &amp;quot;highschoolDropOut&amp;quot;, 
    &amp;quot;ELA_6thgrade&amp;quot;, &amp;quot;MATH_6thgrade&amp;quot;, &amp;quot;residential_segregation_black_white&amp;quot;, 
    &amp;quot;theil_whiteBlack&amp;quot;)

popVars &amp;lt;- c(&amp;quot;FIPS&amp;quot;, &amp;quot;pop&amp;quot;, &amp;quot;pop.c.total_5yr&amp;quot;, &amp;quot;pop.blackPrcnt_log&amp;quot;, &amp;quot;pop.c.black_5yr&amp;quot;, 
    &amp;quot;black_sq&amp;quot;, &amp;quot;pop.c.black_change&amp;quot;, &amp;quot;pop.c.hispanic_5yr&amp;quot;, &amp;quot;pop.male.15_29_5yr&amp;quot;, 
    &amp;quot;policePrcntBlack&amp;quot;, &amp;quot;policeRatio&amp;quot;, &amp;quot;policeFullTime_log&amp;quot;, &amp;quot;policeFullTime&amp;quot;, 
    &amp;quot;crowding_prcnt&amp;quot;)

depVars &amp;lt;- c(&amp;quot;killRate&amp;quot;, &amp;quot;killed&amp;quot;, &amp;quot;killDummy&amp;quot;)
allVars &amp;lt;- c(depVars, crimeRateVars, crimeCountVars, sesVars, popVars)
df_all &amp;lt;- df_wapoLott[, allVars]&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;figure-1.&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Figure 1.&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(choroplethr)
library(ggplot2)
library(ggthemes)
library(choroplethrMaps)
library(RColorBrewer)
library(ggsci)

df &amp;lt;- df_all

data(state.map)
data(county.map)
df$value &amp;lt;- df$killed #set some variable to &amp;#39;value&amp;#39; - can reset later
df$region &amp;lt;- as.numeric(substr(df$FIPS, start=2, stop=6))

mycolors &amp;lt;- ggsci::pal_d3(palette = &amp;quot;category10&amp;quot;)
nColors &amp;lt;- mycolors(n=4)
nColors &amp;lt;- c( &amp;quot;ivory&amp;quot;, &amp;quot;cyan&amp;quot;, nColors)
sc &amp;lt;- scale_fill_gradientn(colours = nColors, 
                           limits=c(0,1,10,20,30,50,100,200))

df$value&amp;lt;- cut(df$killed, 
               breaks=c(-1,0,1,10,50,100,200),
               labels=c(&amp;quot;None&amp;quot;, &amp;quot;1&amp;quot;, &amp;quot;2-10&amp;quot;, &amp;quot;11-50&amp;quot;, &amp;quot;51-100&amp;quot;,
                        &amp;quot;&amp;gt; 100&amp;quot;)
               )

##To get Alaska and Hawaii to show up correctly...
#see http://stackoverflow.com/questions/38938565/alaska-and-hawaii-not-formatting-correctly-for-county-choropleth-map-in-r

choro = CountyChoropleth$new(df[which(!is.na(df$value)),])
choro$ggplot_scale = scale_fill_manual(values=nColors, 
                      labels=c(&amp;quot;None&amp;quot;, &amp;quot;1&amp;quot;, &amp;quot;2-10&amp;quot;, &amp;quot;11-50&amp;quot;, &amp;quot;51-100&amp;quot;,&amp;quot;&amp;gt; 100&amp;quot;),
                     na.value= &amp;quot;ivory&amp;quot;
                      )
newdf &amp;lt;- choro$render()
newdf$data$value[which(is.na(newdf$data$value))] &amp;lt;- &amp;quot;None&amp;quot;


sum_df &amp;lt;- newdf$data[] %&amp;gt;% 
  tibble::as_tibble() %&amp;gt;% 
  group_by(region) %&amp;gt;% 
  dplyr::summarise(
    name = first(NAME),
    long_av = mean(long),
    lat_av = mean(lat)
  )

df &amp;lt;- dplyr::left_join(df, sum_df)
df$popLabel &amp;lt;- paste0(round(df$pop.c.total_5yr/1e06,2), &amp;quot;M&amp;quot;)

newdf +
  theme_minimal() +
  guides(fill=guide_legend(title = &amp;quot;Civilians Killed&amp;quot;)) +
  scale_fill_manual(values=nColors, 
                    breaks = c(&amp;quot;1&amp;quot;, &amp;quot;2-10&amp;quot;, &amp;quot;11-50&amp;quot;, &amp;quot;51-100&amp;quot;,
                               &amp;quot;&amp;gt; 100&amp;quot;)) +
  ggrepel::geom_label_repel(data= filter(df, killed &amp;gt; 50),
            aes(label= paste0(name, &amp;quot; County&amp;quot;,
                              &amp;quot;\n(n=&amp;quot;, killed, 
                              &amp;quot;, pop. &amp;quot;, popLabel,
                              &amp;quot;)&amp;quot;),
                             x=long_av, y=lat_av, 
                group=region), 
            
            min.segment.length = unit(0.1, &amp;quot;lines&amp;quot;),
            size=3, 
            nudge_x = .75, nudge_y = -.5, fontface=&amp;quot;bold&amp;quot;,
            lineheight=.85, 
            fill=&amp;quot;white&amp;quot;, alpha=0.9) +
  theme(legend.position = c(0.9, 0.2),
        legend.title = element_text(face=&amp;quot;bold&amp;quot;),
        text = element_text(face=&amp;quot;bold&amp;quot;),
        axis.text.x=element_blank(),
        axis.text.y=element_blank()
  ) +
  xlab(&amp;quot;&amp;quot;) +
  ylab(&amp;quot;&amp;quot;) +
ggtitle(label=&amp;quot;Civilians Killed by Police per County (2013-2016)&amp;quot;, 
        subtitle = &amp;quot;Data from Lott &amp;amp; Moody (2013-2015) and Washington Post (2016).\nSource: johnbradford.github.io&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;figure-2.&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Figure 2.&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(choroplethr)
library(ggplot2)
library(ggthemes)
library(choroplethrMaps)
library(RColorBrewer)
library(ggsci)

df &amp;lt;- df_all

data(state.map)
data(county.map)
df$value &amp;lt;- df$killRate #set some variable to &amp;#39;value&amp;#39; - can reset later
df$region &amp;lt;- as.numeric(substr(df$FIPS, start=2, stop=6))

mycolors &amp;lt;- ggsci::pal_d3(palette = &amp;quot;category10&amp;quot;)
nColors &amp;lt;- mycolors(n=4)
nColors &amp;lt;- c( &amp;quot;ivory&amp;quot;, &amp;quot;cyan&amp;quot;, nColors)
#c(&amp;quot;antiquewhite&amp;quot;, &amp;quot;beige&amp;quot;, &amp;quot;ghostwhite&amp;quot;, &amp;quot;floralwhite&amp;quot;, &amp;quot;ivory&amp;quot;)

df$value&amp;lt;- cut(1e05*df$killRate, 
               breaks=c(-1,0,1,10,25,50,100),
               labels=c(&amp;quot;None&amp;quot;, &amp;quot;Less than 1&amp;quot;, &amp;quot;1-10&amp;quot;, &amp;quot;10-25&amp;quot;, &amp;quot;25-50&amp;quot;, &amp;quot;&amp;gt; 50&amp;quot;)
)

#Map


choro = CountyChoropleth$new(df[which(!is.na(df$value)),])
choro$ggplot_scale = scale_fill_manual(values=nColors, 
                                       labels=c(&amp;quot;None&amp;quot;, &amp;quot;Less than 1&amp;quot;, &amp;quot;1-25&amp;quot;, &amp;quot;25-50&amp;quot;, &amp;quot;&amp;gt; 50&amp;quot;),
                                       na.value= &amp;quot;ivory&amp;quot;
)
newdf &amp;lt;- choro$render()
newdf$data$value[which(is.na(newdf$data$value))] &amp;lt;- &amp;quot;None&amp;quot;


sum_df &amp;lt;- newdf$data[] %&amp;gt;% 
  tibble::as_tibble() %&amp;gt;% 
  group_by(region) %&amp;gt;% 
  dplyr::summarise(
    name = first(NAME),
    long_av = mean(long),
    lat_av = mean(lat)
  )

df &amp;lt;- dplyr::left_join(df, sum_df)
df$rateLabel &amp;lt;- round(1e05*df$killRate)

newdf +
  theme_minimal() +
  guides(fill=guide_legend(title = &amp;quot;Civilians Killed per 100,000&amp;quot;)) +
  scale_fill_manual(values=nColors, 
                    breaks = c(&amp;quot;Less than 1&amp;quot;, &amp;quot;1-10&amp;quot;, &amp;quot;10-25&amp;quot;, &amp;quot;25-50&amp;quot;, &amp;quot;&amp;gt; 50&amp;quot;)) +
  ggrepel::geom_label_repel(data= filter(df, 1e05*killRate &amp;gt; 50),
                           aes(label= paste0(name, &amp;quot; County&amp;quot;, &amp;quot;\n&amp;quot;, rateLabel, &amp;quot; per 100k&amp;quot;,
                                             &amp;quot;\n(n=&amp;quot;, killed, 
                                             &amp;quot;, pop. &amp;quot;, round(pop.c.total_5yr),
                                             &amp;quot;)&amp;quot;),
                               x=long_av, y=lat_av,  group=region),
                           min.segment.length = unit(0.1, &amp;quot;lines&amp;quot;),
                           size=3, nudge_x = .75, nudge_y = -.5, fontface=&amp;quot;bold&amp;quot;,
                           lineheight=.85, 
                           fill=&amp;quot;white&amp;quot;, alpha=0.9
                           
                           ) +
  theme(legend.position = c(0.9, 0.2),
        legend.title = element_text(face=&amp;quot;bold&amp;quot;),
        text = element_text(face=&amp;quot;bold&amp;quot;),
        axis.text.x=element_blank(),
        axis.text.y=element_blank()
  ) +
  xlab(&amp;quot;&amp;quot;) +
  ylab(&amp;quot;&amp;quot;) +
ggtitle(label=&amp;quot;Civilians Killed by Police per 100,000 Residents (2013-2016)&amp;quot;, 
        subtitle = &amp;quot;Data from Lott &amp;amp; Moody (2013-2015), Washington Post (2016), and US Census 5-year county population averages (2011-2015).\nSource: johnbradford.github.io&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;figure-3.&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Figure 3.&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(choroplethr)
library(ggplot2)
library(ggthemes)
library(choroplethrMaps)
library(RColorBrewer)
library(ggsci)

df &amp;lt;- df_all

data(state.map)
data(county.map)
df$value &amp;lt;- df$killRate  #set some variable to &amp;#39;value&amp;#39; - can reset later
df$region &amp;lt;- as.numeric(substr(df$FIPS, start = 2, stop = 6))

mycolors &amp;lt;- ggsci::pal_d3(palette = &amp;quot;category10&amp;quot;)
nColors &amp;lt;- mycolors(n = 4)
nColors &amp;lt;- c(&amp;quot;ivory&amp;quot;, &amp;quot;cyan&amp;quot;, nColors)


df$value &amp;lt;- cut(1e+05 * df$killRate, breaks = c(-1, 0, 1, 10, 25, 50, 100), 
    labels = c(&amp;quot;None&amp;quot;, &amp;quot;Less than 1&amp;quot;, &amp;quot;1-10&amp;quot;, &amp;quot;10-25&amp;quot;, &amp;quot;25-50&amp;quot;, &amp;quot;&amp;gt; 50&amp;quot;))

# Map


choro = CountyChoropleth$new(df[which(!is.na(df$value)), ])
choro$ggplot_scale = scale_fill_manual(values = nColors, labels = c(&amp;quot;None&amp;quot;, 
    &amp;quot;Less than 1&amp;quot;, &amp;quot;1-25&amp;quot;, &amp;quot;25-50&amp;quot;, &amp;quot;&amp;gt; 50&amp;quot;), na.value = &amp;quot;ivory&amp;quot;)
newdf &amp;lt;- choro$render()
newdf$data$value[which(is.na(newdf$data$value))] &amp;lt;- &amp;quot;None&amp;quot;

sum_df &amp;lt;- newdf$data[] %&amp;gt;% tibble::as_tibble() %&amp;gt;% group_by(region) %&amp;gt;% dplyr::summarise(name = first(NAME), 
    long_av = mean(long), lat_av = mean(lat))

df &amp;lt;- dplyr::left_join(df, sum_df)
df$rateLabel &amp;lt;- round(1e+05 * df$killRate)

newdf + theme_minimal() + guides(fill = guide_legend(title = &amp;quot;Civilians Killed per 100,000&amp;quot;)) + 
    scale_fill_manual(values = nColors, breaks = c(&amp;quot;Less than 1&amp;quot;, &amp;quot;1-10&amp;quot;, &amp;quot;10-25&amp;quot;, 
        &amp;quot;25-50&amp;quot;, &amp;quot;&amp;gt; 50&amp;quot;)) + 

ggrepel::geom_label_repel(data = dplyr::filter(df, 1e+05 * killRate &amp;gt; 10, pop.c.total_5yr &amp;gt; 
    10000), aes(label = paste0(name, &amp;quot; County&amp;quot;, &amp;quot;\n&amp;quot;, rateLabel, &amp;quot; per 100k&amp;quot;, 
    &amp;quot;\n(n=&amp;quot;, killed, &amp;quot;, pop. &amp;quot;, round(pop.c.total_5yr), &amp;quot;)&amp;quot;), x = long_av, y = lat_av, 
    group = region), min.segment.length = unit(0.1, &amp;quot;lines&amp;quot;), size = 3, nudge_x = 0, 
    nudge_y = -0.5, fontface = &amp;quot;bold&amp;quot;, lineheight = 0.85, fill = &amp;quot;white&amp;quot;, alpha = 0.9) + 
    theme(legend.position = c(0.9, 0.2), legend.title = element_text(face = &amp;quot;bold&amp;quot;), 
        text = element_text(face = &amp;quot;bold&amp;quot;), axis.text.x = element_blank(), axis.text.y = element_blank()) + 
    xlab(&amp;quot;&amp;quot;) + ylab(&amp;quot;&amp;quot;) + ggtitle(label = &amp;quot;Killed by Police Rates (2013-2016) in Counties with at least 10,000 Residents&amp;quot;, 
    subtitle = &amp;quot;Data from Lott &amp;amp; Moody (2013-2015), Washington Post (2016), and US Census 5-year county population averages (2011-2015).\nSource: johnbradford.github.io&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>County Crime and Health Data Analysis: </title>
      <link>/project/countyshiny/</link>
      <pubDate>Sun, 07 May 2017 00:00:00 +0000</pubDate>
      
      <guid>/project/countyshiny/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Crime Graphs</title>
      <link>/post/test-post/</link>
      <pubDate>Sun, 07 May 2017 00:00:00 +0000</pubDate>
      
      <guid>/post/test-post/</guid>
      <description>&lt;p&gt;Scatterplot - Violent Crime &amp;amp; Population by Race: Police Killings vs No Police Killings of Civilians. (Washington Post)&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-05-07-test-post_files/figure-html/unnamed-chunk-2-1.png&#34; width=&#34;864&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Police Shooting</title>
      <link>/project/policeshooting/</link>
      <pubDate>Sun, 07 May 2017 00:00:00 +0000</pubDate>
      
      <guid>/project/policeshooting/</guid>
      <description></description>
    </item>
    
    <item>
      <title>The Treadmill of Destruction in Comparative Perspective: A Panel Study of Military Spending and Carbon Emissions, 1960-2014.</title>
      <link>/publication/jwsr_co2_military/</link>
      <pubDate>Mon, 01 May 2017 00:00:00 +0000</pubDate>
      
      <guid>/publication/jwsr_co2_military/</guid>
      <description></description>
    </item>
    
    <item>
      <title>The Treadmill of Destruction and Ecological Exchange in Comparative Perspective: A Panel Study of the Biological Capacity of Nations, 1961-2007</title>
      <link>/talk/eue_knoxville_2015/</link>
      <pubDate>Fri, 16 Oct 2015 00:00:00 +0000</pubDate>
      
      <guid>/talk/eue_knoxville_2015/</guid>
      <description>&lt;script async class=&#34;speakerdeck-embed&#34; data-id=&#34;a6d284cfc7e94932b2c85dfc0f787469&#34; data-ratio=&#34;1.77777777777778&#34; src=&#34;//speakerdeck.com/assets/embed.js&#34;&gt;&lt;/script&gt;
</description>
    </item>
    
    <item>
      <title>Explaining Social Action Revisited: A Reply to John Levi Martin</title>
      <link>/publication/cpst_martin_reply/</link>
      <pubDate>Wed, 01 Jan 2014 00:00:00 +0000</pubDate>
      
      <guid>/publication/cpst_martin_reply/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Explaining Explanation: A Critical Review of John Levi Martin’s The Explanation of Social Action</title>
      <link>/publication/cpst_martin_review/</link>
      <pubDate>Tue, 01 Jan 2013 00:00:00 +0000</pubDate>
      
      <guid>/publication/cpst_martin_review/</guid>
      <description></description>
    </item>
    
  </channel>
</rss>
